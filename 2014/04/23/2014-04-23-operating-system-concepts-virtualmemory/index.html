<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Operating system concepts - VirtualMemory | BobbyTang Tech Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Demand Paging
Loading the entire program into memory results in loading the executable code for all options, regardless of whether an option is ultimately selected by the user or not. An alternative s">
<meta property="og:type" content="article">
<meta property="og:title" content="Operating system concepts - VirtualMemory">
<meta property="og:url" content="http://sicongtang.github.io/2014/04/23/2014-04-23-operating-system-concepts-virtualmemory/">
<meta property="og:site_name" content="BobbyTang Tech Blog">
<meta property="og:description" content="Demand Paging
Loading the entire program into memory results in loading the executable code for all options, regardless of whether an option is ultimately selected by the user or not. An alternative s">
<meta property="og:image" content="https://farm6.staticflickr.com/5325/13952117776_754a2b4bda.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Operating system concepts - VirtualMemory">
<meta name="twitter:description" content="Demand Paging
Loading the entire program into memory results in loading the executable code for all options, regardless of whether an option is ultimately selected by the user or not. An alternative s">

  
    <link rel="alternative" href="/atom.xml" title="BobbyTang Tech Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">BobbyTang Tech Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Learn Share Inspire</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://sicongtang.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2014-04-23-operating-system-concepts-virtualmemory" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/23/2014-04-23-operating-system-concepts-virtualmemory/" class="article-date">
  <time datetime="2014-04-22T21:43:26.000Z" itemprop="datePublished">Apr 23 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/books/">books</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Operating system concepts - VirtualMemory
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Demand_Paging">Demand Paging</h2>
<p>Loading the entire program into memory results in loading the executable code for all options, regardless of whether an option is ultimately selected by the user or not. An alternative strategy is to load pages only as they are needed. This technique is known as <strong>demand paging</strong> and is commonly used in virtual memory systems.</p>
<h2 id="Page_Fault">Page Fault</h2>
<p>A page fault causes the following sequence to occur:</p>
<p><img src="https://farm6.staticflickr.com/5325/13952117776_754a2b4bda.jpg" alt="Alt text" title="Steps_in_handling_a_page_fault.png"></p>
<ol>
<li>Trap to the operating system. </li>
<li>Save the user registers and process state. </li>
<li>Determine that the interrupt was a page fault. </li>
<li>Check that the page reference was legal and determine the location of the page on the disk. </li>
<li>Issue a read from the disk to a free frame:<br>a. Wait in a queue for this device until the read request is serviced.<br>b. Wait for the device seek and/or latency time.<br>c. Begin the transfer of the page to a free frame.</li>
<li>While waiting, allocate the CPU to some other user (CPU scheduling, optional). </li>
<li>Receive an interrupt from the disk I/O subsystem (I/O completed). </li>
<li>Save the registers and process state for the other user (if step 6 is executed). </li>
<li>Determine that the interrupt was from the disk. </li>
<li>Correct the page table and other tables to show that the desired page is now in memory. </li>
<li>Wait for the CPU to be allocated to this process again. </li>
<li>Restore the user registers, process state, and new page table, and then resume the interrupted instruction. </li>
</ol>
<h2 id="Copy-on-Write">Copy-on-Write</h2>
<p>Considering that many child processes invoke the exec() system call immediately after creation, the copying of the parent’s address space may be unnecessary.</p>
<p>Instead, we can use a technique known as <strong>copy-on-write</strong>, which works by allowing the parent and child processes initially to share the same pages. These shared pages are marked as copy-on-write pages, meaning that if either process writes to a shared page, a copy of the shared page is created.</p>
<h2 id="Page_Replacement">Page Replacement</h2>
<ol>
<li>Find the location of the desired page on the disk. </li>
<li>Find a free frame:<br>a. If there is a free frame, use it.<br>b. If there is no free frame, use a page-replacement algorithm to select a victim frame.<br>c. Write the victim frame to the disk; change the page and frame tables accordingly. </li>
<li>Read the desired page into the newly freed frame; change the page and frame tables. </li>
<li>Restart the user process. </li>
</ol>
<p><strong>Page Replacement Algorithm</strong></p>
<ul>
<li>FIFO Page Replacement</li>
<li>Optimal Page Replacement</li>
<li>LRU Page Replacement</li>
<li>LRU-Approximation Page Replacement</li>
<li>Additional-Reference-Bits Algorithm</li>
<li>Second-Chance Algorithm<br>  a. Enhanced Second-Chance Algorithm</li>
<li>Counting-Based Page Replacement<br>  a. least-frequently-used (LFU) page-replacement algorithm<br>  b. most-frequently-used (MFU) page-replacement algorithm</li>
</ul>
<h2 id="Raw_I/O">Raw I/O</h2>
<p>Some operating systems give special programs the ability to use a disk partition as a large sequential array of logical blocks, without any file-system data structures. This array is sometimes called the raw disk, and I/O to this array is termed <strong>raw I/O</strong>.</p>
<p><strong>Raw I/O</strong> bypasses all the file- system services, such as file I/O demand paging, file locking, prefetching, space allocation, file names, and directories.</p>
<h2 id="Thrashing">Thrashing</h2>
<p>In fact, look at any process that does not have “enough” frames. If the process does not have the number of frames it needs to support pages in active use, it will quickly page-fault. At this point, it must replace some page. However, since all its pages are in active use, it must replace a page that will be needed again right away. Consequently, it quickly faults again, and again, and again, replacing pages that it must bring back in immediately.</p>
<p>This high paging activity is called <strong>thrashing</strong>. A process is thrashing if it is spending more time paging than executing.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://sicongtang.github.io/2014/04/23/2014-04-23-operating-system-concepts-virtualmemory/" data-id="obds0vxe5bcxfucs" class="article-share-link">Share</a>
      
        <a href="http://sicongtang.github.io/2014/04/23/2014-04-23-operating-system-concepts-virtualmemory/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/04/23/2014-04-23-todo-reading-book-list/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          TODO reading book list
        
      </div>
    </a>
  
  
    <a href="/2014/04/09/2014-04-09-operating-system-concepts-mainmemory/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Operating system concepts - MainMemory</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/books/">books</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/devenvsetup-emacs/">devenvsetup emacs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/devenvsetup-python/">devenvsetup python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/devenvsetup-ruby/">devenvsetup ruby</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/sql/">sql</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/test/">test</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/10/02/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/09/05/2014-09-05-javascript-patterns-notes/">Javascript Patterns Notes</a>
          </li>
        
          <li>
            <a href="/2014/09/02/2014-09-02-mongodb-sql-summary/">mongodb sql summary</a>
          </li>
        
          <li>
            <a href="/2014/07/24/2014-07-24-a-series-of-general-questions-while-designing-webapps/">A series of general questions while designing webapps</a>
          </li>
        
          <li>
            <a href="/2014/07/23/2014-07-23-getting-start-with-emacs/">Getting Start with Emacs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Bobby Tang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'bobbytang';
  
  var disqus_url = 'http://sicongtang.github.io/2014/04/23/2014-04-23-operating-system-concepts-virtualmemory/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>