<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2015 | BobbyTang&#39;s Tech Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="BobbyTang's Tech Blog">
<meta property="og:url" content="http://sicongtang.github.io/archives/2015/">
<meta property="og:site_name" content="BobbyTang's Tech Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BobbyTang's Tech Blog">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="BobbyTang&#39;s Tech Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="http://fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">

  <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">

  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-57015869-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</head>

<body>
  <div id="container">
    <div id="wrap">
      <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">BobbyTang&#39;s Tech Blog</a>
    <div class="collapse navbar-collapse nav-menu">
      <ul class="nav navbar-nav">
      
        <li>
          <a href="/archives">
            <i class="fa fa-archive"></i>
            Archives
          </a>
        </li>
      
        <li>
          <a href="/categories">
            <i class="fa fa-folder"></i>
            Categories
          </a>
        </li>
      
        <li>
          <a href="/tags">
            <i class="fa fa-tags"></i>
            Tags
          </a>
        </li>
      
        <li>
          <a href="/wiki">
            <i class="fa fa-book"></i>
            Wiki
          </a>
        </li>
      
        <li>
          <a href="/about">
            <i class="fa fa-user"></i>
            About
          </a>
        </li>
      
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
          <li><a id="rss-link" href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>

      <div id='content' class="container">

        <div class="page-header-wrapper">
          <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
          <div class="page-header">
            <h1 class="title">
          
            
              Archives
            
          
            </h1>
        </div>
      </div>
      
      <section id="main"
        
      >

  



  
    <article id="post-uc0h77gstkz3uqbb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/11/04/Review-Google-Research-MapReduce/">Review Google Research: Map Reduce</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-11-04T00:19:17.000Z" itemprop="datePublished">Nov 4 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <h2 id="definition">Definition</h2><p>MapReduce is a programming model and an associated implementation for processing and generating large data sets. Programs written in this functional style are automatically parallelized and executed on a large cluster of commodity machines.</p>
<p>Our abstraction is inspired by the map and reduce primitives present in Lisp and many other functional languages. We realized that most of our computations involved applying a map operation to each logic &quot;record&quot; in our input in order to compute a set of intermediate key/value pairs, and then applying a reduce operation to all the values that shared the same key, in order to <strong>combine the derived data appropriately</strong>.</p>
<h2 id="hardware">Hardware</h2><ol>
<li>dual-processor x86 processors running Linux, with 2-4GB of memory performance</li>
<li>commodity networking hardware - 100 MB/secs</li>
<li>machine failures are common</li>
<li>storage is in expensive IDE disk</li>
</ol>
<h2 id="execution-overview">Execution Overview</h2><h2 id="master-data-strcutures">Master Data Strcutures</h2><p>For each completed map task, the master stores the locations and sizes of the R intermediate file regions produced by the map task. ... The information is pushed incrementally to works that have in-progress reduce tasks.</p>
<h2 id="fault-tolerance">Fault Tolerance</h2><p>The master pings every worker periodically.</p>
<p>MapReduce is resilient to large-scale worker failures. The MapReduce master simply re-executed the work done by the unreachable worker machines.</p>
<p>However, given that there is only a single master, its failure is unlikely; therefore our current implementation aborts the MapReduce computation if the master failes.</p>
<h2 id="locality">Locality</h2><p>The MapReduce master takes the location information of the input files into account and attempts to schedule a map taks on a machine that contains a replica of the corresponding input data.</p>
<h2 id="backup-tasks">Backup Tasks</h2><p>One of the common causes that lengthens the total time taken for a MapReduce operation is a &quot;straggler&quot;: a machine that takes an unusually long time to complete one of the last few map or reduce taks in the computation. We have a general mechanism to alleviate the problem of stragglers. When a MapReduce operation is close to completion, the master schedules backup executions of the remaining in-progress tasks.</p>
<h2 id="partitioning/combiner-function">Partitioning/Combiner Function</h2><h2 id="remaining-questions-after-review">Remaining questions after review</h2><ol>
<li>How reduce workers fetch data from different temporary files that map workers generated?</li>
<li>How to explain the map/reduce function as below with more concrete examples:</li>
</ol>
<p>map (k1,v1) -&gt; list(k2,v2)
reduce (k2,list(v2)) -&gt; list(v2)</p>

        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/11/04/Review-Google-Research-MapReduce/" data-id="uc0h77gstkz3uqbb" data_title="Review Google Research: Map Reduce"
          data_summary="DefinitionMapReduce is a programming model and an associated implementation for processing and generating large data sets. Programs written in this functional s..." class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/11/04/Review-Google-Research-MapReduce/#disqus_thread" class="article-comment-link">Comments</a>
          
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/bigdata/">bigdata</a>
  </div>


          

        </footer>
      
    </div>
  </div>
</article>


  
    <article id="post-zt779agwbolm4z3m" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/09/27/DB2-SQL-Tuning-Tips/">Db2 Sql Tuning Tips</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-09-27T13:18:24.000Z" itemprop="datePublished">Sep 27 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <p>List most critical tips from <a href="https://www.safaribooksonline.com/library/view/db2-sql-tuning/9780133038484/" target="_blank" rel="external">DB2 SQL Tuning Tips for z/OS Developers</a></p>
<ol>
<li><p>Stay Away from Distinct if Possbile
Details: <code>group by</code> or <code>in or exists subquery</code> if duplicates due to one-to-many relationship</p>
</li>
<li><p>Try Rewriting Range Predicates as Between Predicates</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">WHERE HIREDATE &gt; :HV-DATE</div><div class="line">WHERE HIREDATE BETWEEN :HV-DATE and '9999-12-31'</div></pre></td></tr></table></figure>
</li>
<li><p>Use Tools for Monitoring
Details: Some of the most common z/OS DB2 monitoring tools are OMEGAMON®, TMon, MainView, Apptune, Insight for DB2, and DB2PM. Some of the most common DB2 LUW monitoring tools are IBM’s Optim™ Query Tuner, Precise for DB2, Quest, DBI Software, Embarcadero’s Performance Analyst, and ITGAIN.</p>
</li>
<li><p>Avoid Discrepancies with Non-Column Expressions</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">WHERE EDLEVEL = 123.45 * 12</div><div class="line">WHERE EDLEVEL = SMALLINT(ROUND(123.45*12,0))</div></pre></td></tr></table></figure>
</li>
<li><p>Ensure That Subquery Predicates Involving Min and Max Have the Possibility of Nulls Being Returned Handled</p>
</li>
<li><p>Always Code For Fetch Only or For Read Only with Cursor Processing When a Query Is Only Selecting Data</p>
</li>
<li><p>Avoid Selecting a Row from a Table to Help Decide Whether the Logic in the Code Should Execute an Update or an Insert</p>
</li>
<li><p>Use the DB2 V9 MERGE Statement</p>
</li>
<li><p>Keep Table and Index Files Healthy and Organized
Details: SYSIBM.SYSTABLESPACESTATS and SYSIBM.SYSINDEXSPACESTATS tables</p>
</li>
<li><p>Consider OLTP Front-End Processing</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">OPTIMIZE</span> <span class="keyword">FOR</span> <span class="number">14</span> <span class="keyword">ROWS</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>Take Advantage of Materialized Query Tables to Improve Response Time (Dynamic SQL Only)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DEPT_SUM_MQT_TABLE <span class="keyword">AS</span></span></div><div class="line">(<span class="keyword">SELECT</span>  WORKDEPT, <span class="keyword">AVG</span>(SALARY) <span class="keyword">AS</span> AVG_SAL,</div><div class="line"><span class="keyword">AVG</span>(BONUS) <span class="keyword">AS</span> AVG_BONUS</div><div class="line"><span class="keyword">AVG</span>(COMM)  <span class="keyword">AS</span> AVG_COMM,</div><div class="line"><span class="keyword">SUM</span>(SALARY) <span class="keyword">AS</span> SUM_SAL,</div><div class="line"><span class="keyword">SUM</span>(BONUS) <span class="keyword">AS</span> SUM_BONUS</div><div class="line"><span class="keyword">SUM</span>(COMM)  <span class="keyword">AS</span> SUM_COMM</div><div class="line"><span class="keyword">FROM</span> EMP</div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span>  WORKDEPT)</div><div class="line"><span class="keyword">DATA</span> <span class="keyword">INITIALLY</span> <span class="keyword">DEFERRED</span> REFRESH <span class="keyword">DEFERRED</span></div><div class="line">MAINTAINED <span class="keyword">BY</span> SYSTEM</div><div class="line">ENABLE <span class="keyword">QUERY</span> OPTIMIZATION;</div><div class="line"><span class="comment">--original query</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(BONUS)</span></div><div class="line"><span class="keyword">FROM</span> EMP</div><div class="line"><span class="keyword">WHERE</span>  WORKDEPT = <span class="string">'A00'</span></div><div class="line"><span class="comment">--rewrite by optimize</span></div><div class="line"><span class="keyword">SELECT</span> AVG_BONUS</div><div class="line"><span class="keyword">FROM</span> DEPT_SUM_MQT_TABLE</div><div class="line"><span class="keyword">WHERE</span>  WORKDEPT = <span class="string">'A00'</span></div></pre></td></tr></table></figure>
</li>
<li><p>Insert with Select</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> EMPNO, LASTNAME, MIDINIT, FIRSTNME,</span></div><div class="line">DEPTNO, SALARY, BONUS, COMM</div><div class="line"><span class="keyword">FROM</span> FINAL <span class="keyword">TABLE</span></div><div class="line">(<span class="keyword">INSERT</span>   (EMPNO, LASTNAME, MIDINIT, FIRSTNME, DEPTNO)</div><div class="line"><span class="keyword">VALUES</span> (<span class="string">'123456'</span>, <span class="string">'SMITH'</span>, <span class="string">'A'</span>, <span class="string">'JOE'</span>, <span class="string">'A00'</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>Identify Times for Volatile Tables
Details: Using the VOLATILE keyword on the Create or Alter Table statement identifies tables whose data volumes fluctuate.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> EMP_TEMP</span></div><div class="line"> (EMPNO    <span class="built_in">CHAR</span>(<span class="number">6</span>)  <span class="keyword">Not</span> <span class="literal">Null</span>,</div><div class="line">   LASTNAME <span class="built_in">VARCHAR</span>(<span class="number">15</span>)  <span class="keyword">Not</span> <span class="literal">Null</span> )</div><div class="line">   VOLATILE</div></pre></td></tr></table></figure>
</li>
<li><p>Use the ON COMMIT DROP Enhancement</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">DECLARE</span> <span class="keyword">GLOBAL</span> <span class="keyword">TEMPORARY</span> <span class="keyword">TABLE</span></span></div><div class="line"><span class="keyword">SESSION</span>.EMP_TEMP1  (COL1 <span class="built_in">CHAR</span> (<span class="number">20</span>)</div><div class="line">COL2 <span class="built_in">CHAR</span> (<span class="number">10</span>)</div><div class="line">COL3 <span class="built_in">SMALLINT</span> )</div><div class="line"><span class="keyword">ON</span> <span class="keyword">COMMIT</span> <span class="keyword">DROP</span> <span class="keyword">TABLE</span></div><div class="line"></div><div class="line"><span class="keyword">ON</span> <span class="keyword">COMMIT</span> <span class="keyword">DELETE</span> <span class="keyword">ROWS</span></div><div class="line"><span class="keyword">ON</span> <span class="keyword">COMMIT</span> <span class="keyword">PRESERVE</span> <span class="keyword">ROWS</span></div></pre></td></tr></table></figure>
</li>
<li><p>Use Multiple Distincts
Details: This is an automatic performance gain that alleviates the need for separate calls to DB2.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">SUM</span> (<span class="keyword">DISTINCT</span> SALARY),</span></div><div class="line">     <span class="keyword">AVG</span>(<span class="keyword">DISTINCT</span> BONUS)</div><div class="line">     <span class="keyword">FROM</span> EMP;</div></pre></td></tr></table></figure>
</li>
<li><p>Take Advantage of Backward Index Scanning
Details: For each column that is in the Order By clause, the ordering that is specified in the index has to be exactly the opposite of the ordering that is specified in the Order By clause.</p>
</li>
<li><p>Set Your Clustering Index Correctly</p>
</li>
<li><p>Take Advantage of DB2 V8 Enhanced DISCARD Capabilities When It Comes to Mass Deletes</p>
</li>
<li><p>Consider Parallelism
<a href="https://www-01.ibm.com/support/knowledgecenter/SSEPEK_11.0.0/com.ibm.db2z11.doc.perf/src/tpc/db2z_enableparallelprocess.dita" target="_blank" rel="external">https://www-01.ibm.com/support/knowledgecenter/SSEPEK_11.0.0/com.ibm.db2z11.doc.perf/src/tpc/db2z_enableparallelprocess.dita</a></p>
</li>
<li><p>Consider Direct Row Access Using ROWID Datatype (V8) or RID Function (V9)
Details: If the ROWID value is then used in the search condition of subsequent updates or deletes, DB2 may navigate directly to the row, bypassing any index processing or tablespace scans.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EMP_ID     ROWID    NOT NULL GENERATED ALWAYS</div></pre></td></tr></table></figure>
</li>
<li><p>Specify the Leading Index Columns in WHERE Clauses
Details: For a composite index, the following query would use the index and execute matching processing as long as the leading column of the index is specified in the WHERE clause.</p>
</li>
<li><p>Keep in Mind Index Only Processing Whenever Possible
Many times, developers code queries that need to execute one of the four column aggregate functions (Sum, Avg, Min, or Max). They can get some great results by including an extra column as part of an index. Take, for example, the following query and associated index, Index1 = (YEAR, PERIOD):
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(JRNL_AMT)</span></div><div class="line"><span class="keyword">FROM</span> LEDGER_TABLE</div><div class="line"><span class="keyword">WHERE</span> <span class="keyword">YEAR</span> = <span class="number">2008</span> <span class="keyword">AND</span> PERIOD <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div></pre></td></tr></table></figure>
DB2 is good at recognizing the JRNL_AMT column in the index, even though there is no specific predicate on it, and it will choose index only processing.</p>
</li>
<li><p>Take Advantage of DB2 V9 Optimistic Locking</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> EMP</span></div><div class="line"> (EMPNO  <span class="built_in">CHAR</span>(<span class="number">6</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">   ....</div><div class="line">   .....</div><div class="line">   EMP_UPD  <span class="keyword">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></div><div class="line">   GENERATED <span class="keyword">BY</span> <span class="keyword">DEFAULT</span></div><div class="line">   <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span></div><div class="line">   <span class="keyword">AS</span> <span class="keyword">ROW</span> <span class="keyword">CHANGE</span> <span class="keyword">TIMESTAMP</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>Use the DB2 V9 MERGE Statement
<a href="https://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html" target="_blank" rel="external">https://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html</a></p>
</li>
<li><p>Code Boolean Term Predicates Whenever Possible
Details: A Boolean term predicate is a predicate that is connected by And logic, so when one predicate is evaluated as false for a row, it then makes the entire Where clause evaluate to false.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> EMPNO, LASTNAME, SALARY</span></div><div class="line"><span class="keyword">FROM</span> EMP</div><div class="line"><span class="keyword">WHERE</span> (LASTNAME &gt; <span class="string">'SMITH'</span>)</div><div class="line"><span class="keyword">OR</span> (LASTNAME = <span class="string">'SMITH'</span> <span class="keyword">and</span> FIRSTNME &gt; <span class="string">'BOB'</span>)</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> EMPNO, LASTNAME, SALARY</div><div class="line"><span class="keyword">FROM</span> EMP</div><div class="line"><span class="keyword">WHERE</span>  LASTNAME &gt;= <span class="string">'SMITH'</span></div><div class="line">  <span class="keyword">AND</span> (LASTNAME &gt;  <span class="string">'SMITH'</span>   <span class="keyword">OR</span></div><div class="line">      (LASTNAME = <span class="string">'SMITH'</span> <span class="keyword">AND</span> FIRSTNME &gt; <span class="string">'BOB'</span>))</div></pre></td></tr></table></figure>
</li>
<li><p>Avoid Sorts with Order By
Details: DB2 may avoid sorts if there are leading columns in an index to match the Order By or if the query contains an equal predicate on the leading column(s) of an index.</p>
</li>
<li><p>Watch Out for Case Logic
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> EMPNO, LASTNAME, SALARY,</span></div><div class="line">       <span class="keyword">CASE</span> <span class="keyword">WHEN</span> SALARY &lt; ...</div><div class="line">            <span class="keyword">WHEN</span> SALARY &gt; ...</div><div class="line">       <span class="keyword">ELSE</span></div><div class="line">       <span class="keyword">END</span></div><div class="line"><span class="keyword">FROM</span> EMP</div></pre></td></tr></table></figure>
Details: If most of the rows have a Salary &lt; 50000.00, then that piece of logic should be coded first.</p>
</li>
<li><p>Know Your Version of DB2</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> GETVARIABLE(<span class="string">'SYSIBM.VERSION'</span>)</span></div><div class="line"><span class="keyword">FROM</span> SYSIBM.SYSDUMMY1</div></pre></td></tr></table></figure>
</li>
<li><p>If You Need True Uniqueness, Try the V8 Generate_Unique Function</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ORDER_TBL</span></div><div class="line"> (ORDER_ID        <span class="built_in">CHAR</span>(<span class="number">13</span>) <span class="keyword">FOR</span> <span class="built_in">BIT</span> <span class="keyword">DATA</span>,</div><div class="line">  ORDER_DATE      <span class="built_in">DATE</span>,</div><div class="line">  ORDER_LOC       <span class="built_in">CHAR</span>(<span class="number">03</span>) );</div><div class="line"></div><div class="line"><span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ORDER_TBL</span></div><div class="line">  <span class="keyword">VALUES</span>(GENERATE_UNIQUE(), <span class="keyword">CURRENT</span> <span class="built_in">DATE</span>, <span class="string">'NY'</span>);</div><div class="line"></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">TIMESTAMP</span>(ORDER_ID), <span class="keyword">ORDER</span> <span class="built_in">DATE</span>, ....</span></div><div class="line"><span class="keyword">FROM</span> ORDER_TBL;</div></pre></td></tr></table></figure>
</li>
<li><p>Update and Delete with Select (V9)
Details: The words Old Table are SQL DB2 reserved words that need to be coded in order for this statement to work.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> SALARY, BONUS</span></div><div class="line"><span class="keyword">FROM</span> OLD <span class="keyword">TABLE</span></div><div class="line"> (<span class="keyword">UPDATE</span> EMP</div><div class="line">    <span class="keyword">SET</span> SALARY = :HV1-SALARY,</div><div class="line">    BONUS = :HV2-BONUS</div><div class="line">    <span class="keyword">WHERE</span> EMPNO = :HV-EMPNO)</div><div class="line"><span class="keyword">SELECT</span> LASTNAME, FIRSTNME, WORKDEPT</div><div class="line"><span class="keyword">FROM</span> OLD <span class="keyword">TABLE</span></div><div class="line">  (<span class="keyword">DELETE</span> <span class="keyword">FROM</span> EMP</div><div class="line">   <span class="keyword">WHERE</span> EMPNO = :HV-EMPNO)</div></pre></td></tr></table></figure>
</li>
<li><p>Avoid Unnecessary Sorting
Details: Data sorting can be caused by Group By, Order By, Distinct, Union, Intersect, Except, and Join processing.</p>
</li>
</ol>
<p>List most critical tips of store procedure related from <a href="https://www.safaribooksonline.com/library/view/db2-sql-tuning/9780133038484/" target="_blank" rel="external">DB2 SQL Tuning Tips for z/OS Developers</a></p>

        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/09/27/DB2-SQL-Tuning-Tips/" data-id="zt779agwbolm4z3m" data_title="Db2 Sql Tuning Tips"
          data_summary="List most critical tips from DB2 SQL Tuning Tips for z/OS Developers

Stay Away from Distinct if Possbile
Details: group by or in or exists subquery if duplicat..." class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/09/27/DB2-SQL-Tuning-Tips/#disqus_thread" class="article-comment-link">Comments</a>
          
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/sql/">sql</a>
  </div>


          

        </footer>
      
    </div>
  </div>
</article>


  
    <article id="post-2bxntrcdvr9mvuau" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/09/27/ThreadPoolExecutor-or-ProducerConsumer-Pattern/">Thread Pool Executor or Producer Consumer Pattern</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-09-27T11:58:09.000Z" itemprop="datePublished">Sep 27 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <p>In this topic, I would like to talk about more ThreadPoolExecutor in Java, comapred with ProducerConsumer multi-threading pattern in tradition.</p>
<p>TODO</p>
<p>References:</p>
<ol>
<li><a href="http://ifeve.com/blocking-threadpool-executor/" target="_blank" rel="external">http://ifeve.com/blocking-threadpool-executor/</a></li>
</ol>

        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/09/27/ThreadPoolExecutor-or-ProducerConsumer-Pattern/" data-id="2bxntrcdvr9mvuau" data_title="Thread Pool Executor or Producer Consumer Pattern"
          data_summary="In this topic, I would like to talk about more ThreadPoolExecutor in Java, comapred with ProducerConsumer multi-threading pattern in tradition.
TODO
References:..." class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/09/27/ThreadPoolExecutor-or-ProducerConsumer-Pattern/#disqus_thread" class="article-comment-link">Comments</a>
          
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>


          

        </footer>
      
    </div>
  </div>
</article>


  
    <article id="post-71azd2o2fy5orpdo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/05/12/java-generics-tips-tricks/">Java Generics Tips and Tricks</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-05-11T21:54:26.000Z" itemprop="datePublished">May 12 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <!---->
          <p>Parameterized type: <code>List&lt;String&gt;</code></p>
<p>Actual type parameter: <code>String</code></p>
<p>Generic type: <code>List&lt;E&gt;</code></p>
<p>Formal type parameter: <code>E</code></p>
<p>Unbounded wildcard type: <code>List&lt;?&gt;</code></p>
<p>Raw type: <code>List</code></p>
<p>Bounded type parameter: <code>&lt;E extends Number&gt;</code></p>
<p>Recursive type bound: <code>&lt;T extends Comparable&lt;T&gt;&gt;</code></p>
<p>Bounded wildcard type: <code>Bounded wildcard type</code></p>
<p>List&lt;? extends Number&gt;: <code>static &lt;E&gt; List&lt;E&gt; asList(E[] a)</code></p>
<p>Type token: <code>String.class</code></p>

          
            <p class="article-more-link">
              <a href="/2015/05/12/java-generics-tips-tricks/#more">Read More</a>
            </p>
          
        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/05/12/java-generics-tips-tricks/" data-id="71azd2o2fy5orpdo" data_title="Java Generics Tips and Tricks"
          data_summary="Parameterized type: List&lt;String&gt;
Actual type parameter: String
Generic type: List&lt;E&gt;
Formal type parameter: E
Unbounded wildcard type: List&lt;?&gt;..." class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/05/12/java-generics-tips-tricks/#disqus_thread" class="article-comment-link">Comments</a>
          
          

          
<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link label label-primary" href="/tags/java/">java</a></li></ul>


        </footer>
      
    </div>
  </div>
</article>


  
    <article id="post-xr33lh8gp25ir5d4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/02/20/JVM-Internals/">Jvm Internals</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-02-20T03:38:20.000Z" itemprop="datePublished">Feb 20 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <!--<div class="thumbnail"><img src="http://i.imgur.com/Ij8dKbY.png?1" title="jvm_architecture"></div>-->
          <h2 id="1.-jvm-structure">1. JVM Structure</h2><img src="http://i.imgur.com/Ij8dKbY.png?1" title="jvm_architecture">

<h2 id="2.-class-loader-subsystem">2. Class Loader SubSystem</h2><ul>
<li>Loading: finding and importing the binary data for a type</li>
<li>Linking: performing verification, preparation, and (optionally) resolution<ol>
<li>Verification: ensuring the correctness of the imported type</li>
<li>Preparation: allocating memory for class variables and initializing the memory to default values</li>
<li>Resolution: transforming symbolic references from the type into direct references.</li>
</ol>
</li>
<li>Initialization: invoking Java code that initializes class variables to their proper starting values.</li>
</ul>
<p>Parent-Delegation Model</p>
<ul>
<li>Bootstrap Class Loader: $JAVA_HOME/jre/lib/rt.jar, controlled by -Xbootclasspath option</li>
<li>Extension Class Loader: %JAVA_HOME/jre/lib/ext/*.jar, controlled by -Djava.ext.dirs system property</li>
<li>Application/System Class Loader: $CLASSPATH, controlled by -classpath/-cp/$CLASSPATH</li>
<li>User defined classloader: custom classpath [path on disk, a network address etc]</li>
</ul>

          
            <p class="article-more-link">
              <a href="/2015/02/20/JVM-Internals/#more">Read More</a>
            </p>
          
        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/02/20/JVM-Internals/" data-id="xr33lh8gp25ir5d4" data_title="Jvm Internals"
          data_summary="1. JVM Structure

2. Class Loader SubSystem
Loading: finding and importing the binary data for a type
Linking: performing verification, preparation, and (option..." class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/02/20/JVM-Internals/#disqus_thread" class="article-comment-link">Comments</a>
          
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/JVM/">JVM</a>
  </div>


          

        </footer>
      
    </div>
  </div>
</article>


  
    <article id="post-zit0mgoqmz2lxa5n" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
      <header class="article-header">
        <i class="fa fa-file-text-o"></i>
        
  
    <h1 class="archive-title" itemprop="name">
      <a class="article-title" href="/2015/01/18/itemreader-writer-in-spring-batch/">Itemreader Writer in Spring Batch</a>
    </h1>
  


        <div class="article-date">
  <time datetime="2015-01-18T13:51:24.000Z" itemprop="datePublished">Jan 18 2015</time>
</div>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
          <p>References:</p>
<ol>
<li><a href="http://docs.spring.io/spring-batch/trunk/reference/html/readersAndWriters.html" target="_blank" rel="external">http://docs.spring.io/spring-batch/trunk/reference/html/readersAndWriters.html</a></li>
</ol>

        
        <footer class="article-footer">
          <a data-url="http://sicongtang.github.io/2015/01/18/itemreader-writer-in-spring-batch/" data-id="zit0mgoqmz2lxa5n" data_title="Itemreader Writer in Spring Batch"
          data_summary="References:

http://docs.spring.io/spring-batch/trunk/reference/html/readersAndWriters.html

" class="article-share-link">Share</a>
          
            <a href="http://sicongtang.github.io/2015/01/18/itemreader-writer-in-spring-batch/#disqus_thread" class="article-comment-link">Comments</a>
          
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/J2EE/">J2EE</a>
  </div>


          

        </footer>
      
    </div>
  </div>
</article>


  
  



</section>
        
          
<aside id="sidebar">
  
    
      <div class="widget-wrap">
    <div id="search-form-wrap">
      <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://sicongtang.github.io"></form>
    </div>
</div>

    
      
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li class="recent-list">
            <a href="/2015/11/04/Review-Google-Research-MapReduce/">Review Google Research: Map Reduce</a>
          </li>
        
          <li class="recent-list">
            <a href="/2015/09/27/DB2-SQL-Tuning-Tips/">Db2 Sql Tuning Tips</a>
          </li>
        
          <li class="recent-list">
            <a href="/2015/09/27/ThreadPoolExecutor-or-ProducerConsumer-Pattern/">Thread Pool Executor or Producer Consumer Pattern</a>
          </li>
        
          <li class="recent-list">
            <a href="/2015/05/12/java-generics-tips-tricks/">Java Generics Tips and Tricks</a>
          </li>
        
          <li class="recent-list">
            <a href="/2015/02/20/JVM-Internals/">Jvm Internals</a>
          </li>
        
      </ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
      <ul>
        
         <li class="blogroll">
           
             <i class="fa fa-github"></i>
           
           <a href="https://github.com/sicongtang" title="Github">Github</a>
          </li>
        
         <li class="blogroll">
           
             <i class="fa fa-google-plus"></i>
           
           <a href="https://plus.google.com/+BobbyTangSH" title="Google+">Google+</a>
          </li>
        
         <li class="blogroll">
           
             <i class="fa fa-linkedin"></i>
           
           <a href="http://cn.linkedin.com/pub/bobby-tang/43/3b9/a2" title="Linkedin">Linkedin</a>
          </li>
        
      </ul>
    </div>
  </div>


    
  
</aside>


        
      </div>
      <footer id="footer">
  
  <div class="outer container">
    <div id="footer-info" class="inner">
      <a href="/">BobbyTang&#39;s Tech Blog</a> &copy; 2015 Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/seff/nut" target="_blank">Nut</a>
    </div>
  </div>
</footer>
<a id="gotop" href="#">
  <i class="fa fa-chevron-up"></i>
</a>

    </div>
    <nav id="mobile-nav">
  
    <a href="[object Object]" class="mobile-nav-link">0</a>
  
    <a href="[object Object]" class="mobile-nav-link">1</a>
  
    <a href="[object Object]" class="mobile-nav-link">2</a>
  
    <a href="[object Object]" class="mobile-nav-link">3</a>
  
    <a href="[object Object]" class="mobile-nav-link">4</a>
  
</nav>

    
<script>
  var disqus_shortname = 'bobbytang';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/js/jquery.fitvids.js" type="text/javascript"></script>

<script src="/js/bootstrap.min.js" type="text/javascript"></script>

<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>
